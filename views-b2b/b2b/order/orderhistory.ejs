<style type="text/css">
</style>


<div class="b2b-breadcrumbs">
  <div class="container" style="max-width: 960px;">
    <h1>訂單紀錄</h1>
  </div>
</div>


<% if( data.items.length < 1) { %>
  <div class="well">
    <h3 class="text-center">還沒有任何訂單紀錄！</h3>
  </div>
<% } else { %>

  <div class="container orderHistory">
    <table class="table table-hover order-list ">
      <thead>
        <tr>
          <th></th>
          <th>訂購日期</th>
          <th>訂單編號</th>
          <th class="hidden-xs">收件人</th>
          <th class="hidden-xs">訂單金額</th>
          <th class="hidden-xs">發票</th>
          <th class="hidden-xs">運送代碼</th>
        </tr>
      </thead>
      <tbody>
        <% for( key in data.items ) { %>
          <tr data-toggle="collapse" data-target="#<%= data.items[key].orderNumber %>" class="accordion-toggle" aria-expanded="false">
            <td></td>
            <td><%= data.items[key].createdDateTime.dateTime %></td>
            <td><%= data.items[key].orderNumber %></td>
            <td class="hidden-xs"><%= data.items[key].shippingLastname + data.items[key].shippingFirstname%></td>
            <td class="hidden-xs">$ <%= data.items[key].totalIncludeTax %></td>
            <td class="hidden-xs"><%= data.items[key].invoicePrefix %>-<%= data.items[key].invoiceNo %></td>
            <td class="hidden-xs"><%= data.items[key].shippingCode %></td>
          </tr>
          <tr class="order-content">
            <td colspan="8">
              <div id="<%= data.items[key].orderNumber %>" class="collapse">
                <table class="table order-products" >
                  <thead>
                    <tr>
                      <th>品名</th>
                      <th>單價</th>
                      <th>數量</th>
                      <th>小計</th>
                      <th>訂單狀態</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% for( p in data.items[key].OrderProducts ) { %>
                      <tr>
                        <td><%= data.items[key].OrderProducts[p].name %></td>
                        <td>$ <%= data.items[key].OrderProducts[p].regularPrice %></td>
                        <td><%= data.items[key].OrderProducts[p].quantity %></td>
                        <td>$ <%= data.items[key].OrderProducts[p].regularTotal %></td>
                        <td>
                          <%
                            switch(data.orderStatus[key][p]){
                              case "NEW": 
                                %>新訂單<%
                                break;
                              case "PAID": 
                                %>已付款<%
                                break;
                              case "PROCESSING": 
                                %>處理中<%
                                break;
                              case "SHIPPED": 
                                %>已出貨<%
                                break;
                              case "CANCELLED": 
                                %>取消<%
                                break;
                              case "COMPLETED": 
                                %>完成訂單<%
                                break;
                              case "DENIED": 
                                %>拒絕<%
                                break;
                              case "CANCELED REVERSAL": 
                                %>取消退貨<%
                                break;
                              case "FAILED": 
                                %>失敗<%
                                break;
                              case "REFUNDED": 
                                %>退款<%
                                break;
                              case "REVERSED": 
                                %>撤銷<%
                                break;
                              case "CHARGEBACK": 
                                %>交易糾紛<%
                                break;
                              case "PENDING": 
                                %>待處理<%
                                break;
                              case "VOIDED": 
                                %>反悔訂單<%
                                break;
                              case "PROCESSED": 
                                %>已處理<%
                                break;
                              case "EXPIRED": 
                                %>已過期<%
                                break;
                            }
                          %>
                        </td>
                      </tr>
                    <% } %>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
<% } %>
